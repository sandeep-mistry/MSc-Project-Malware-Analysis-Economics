import pickle
import numpy as np
from itertools import zip_longest as zip
import matplotlib.pyplot as plt

filenames = ['1_gram.dat', '2_gram.dat', '3_gram.dat']
n_grams = [1, 2, 3]


def get_mean_extraction_time(filename):
    with open(filename, 'rb') as rfp:
        extraction_times = pickle.load(rfp)

    extraction_times = np.asarray(extraction_times, dtype=np.float32)
    mean_extraction_time = np.mean(extraction_times)
    return mean_extraction_time


for (a, b) in zip(n_grams, filenames):
    plt.plot(a, get_mean_extraction_time(b), marker='o', color='red')
    plt.xlabel('n')
    plt.ylabel('n-gram feature extraction time (s)')
plt.show()

print('Header features mean extraction time: ', get_mean_extraction_time('header_features.dat'))

